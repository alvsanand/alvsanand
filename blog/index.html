<!DOCTYPE html><html lang="en" class="no-js"><head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="This is the personal blog of Alvaro Santos">
      
      
        <meta name="author" content="Alvaro Santos Andres">
      
      
        <link rel="canonical" href="https://alvsanand.com/blog/">
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="category/datahublocal/">
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Blog - alvsanand.com</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/custom.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  <link href="../assets/stylesheets/glightbox.min.css" rel="stylesheet"><script src="../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="alvsanand.com" class="md-header__button md-logo" aria-label="alvsanand.com" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M399.8 362.2c29.5-34.7 47.1-78.3 47.1-125.8 0-113-99.6-204.4-222.5-204.4S2 123.5 2 236.4s99.6 204.5 222.5 204.5c27 0 53.9-4.5 79.4-13.4 1.4-.5 3-.5 4.5-.1s2.7 1.4 3.6 2.6c18.6 25.1 47.6 42.7 79.9 49.9 1.1.2 2.3 0 3.3-.6s1.7-1.6 1.9-2.8c.1-.6.1-1.3 0-1.9s-.4-1.2-.8-1.7c-12.3-16-18.7-35.8-18-56s8.4-39.5 21.7-54.7l-.2.1zM330 212.4l-57.3 43.5 20.8 68.9c.4 1.3.4 2.7-.1 4s-1.2 2.4-2.3 3.2-2.4 1.2-3.8 1.2-2.7-.4-3.8-1.2l-59.1-41-59.1 41.1c-1.1.8-2.4 1.2-3.8 1.2s-2.7-.4-3.8-1.2-1.9-1.9-2.3-3.2-.5-2.7-.1-4l20.8-68.9-57.3-43.5c-1.1-.8-1.9-1.9-2.3-3.2s-.4-2.7 0-4 1.2-2.4 2.3-3.2 2.4-1.3 3.7-1.3l71.9-1.5 23.7-67.9c.4-1.3 1.3-2.4 2.4-3.2s2.4-1.2 3.8-1.2 2.7.4 3.8 1.2 1.9 1.9 2.4 3.2l23.7 67.9 71.9 1.5c1.4 0 2.7.4 3.8 1.2s1.9 1.9 2.3 3.2.4 2.7 0 4-1.2 2.4-2.3 3.3z"></path></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            alvsanand.com
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Blog
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
  
    
  
  About

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  
  Blog

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="alvsanand.com" class="md-nav__button md-logo" aria-label="alvsanand.com" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M399.8 362.2c29.5-34.7 47.1-78.3 47.1-125.8 0-113-99.6-204.4-222.5-204.4S2 123.5 2 236.4s99.6 204.5 222.5 204.5c27 0 53.9-4.5 79.4-13.4 1.4-.5 3-.5 4.5-.1s2.7 1.4 3.6 2.6c18.6 25.1 47.6 42.7 79.9 49.9 1.1.2 2.3 0 3.3-.6s1.7-1.6 1.9-2.8c.1-.6.1-1.3 0-1.9s-.4-1.2-.8-1.7c-12.3-16-18.7-35.8-18-56s8.4-39.5 21.7-54.7l-.2.1zM330 212.4l-57.3 43.5 20.8 68.9c.4 1.3.4 2.7-.1 4s-1.2 2.4-2.3 3.2-2.4 1.2-3.8 1.2-2.7-.4-3.8-1.2l-59.1-41-59.1 41.1c-1.1.8-2.4 1.2-3.8 1.2s-2.7-.4-3.8-1.2-1.9-1.9-2.3-3.2-.5-2.7-.1-4l20.8-68.9-57.3-43.5c-1.1-.8-1.9-1.9-2.3-3.2s-.4-2.7 0-4 1.2-2.4 2.3-3.2 2.4-1.3 3.7-1.3l71.9-1.5 23.7-67.9c.4-1.3 1.3-2.4 2.4-3.2s2.4-1.2 3.8-1.2 2.7.4 3.8 1.2 1.9 1.9 2.4 3.2l23.7 67.9 71.9 1.5c1.4 0 2.7.4 3.8 1.2s1.9 1.9 2.3 3.2.4 2.7 0 4-1.2 2.4-2.3 3.3z"></path></svg>

    </a>
    alvsanand.com
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    About
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Blog
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Blog
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
    
      
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Blog
  

    
  </span>
  
  

      </a>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_2">
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Categories
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Categories
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="category/datahublocal/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Datahub.local
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="category/devops/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DevOps
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="category/general/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    General
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="category/hardware/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Hardware
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="category/learning/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Learning
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
  <div class="md-content" data-md-component="content">
    <div class="md-content__inner">
      <header class="md-typeset">
        <h1 id="blog">Blog</h1>
      </header>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://avatars.githubusercontent.com/u/734567?v=4" alt="Alvaro Santos Andres">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2025-12-26 00:00:00+00:00">December 26, 2025</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="category/devops/" class="md-meta__link">DevOps</a>, 
              <a href="category/datahublocal/" class="md-meta__link">Datahub.local</a></li>
        
        
          
          <li class="md-meta__item">
            
              4 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="migrating-postgresql-in-kubernetes-a-homelab-christmas-adventure"><a class="toclink" href="2025/12/26/migrating-postgresql-in-kubernetes-a-homelab-christmas-adventure/">Migrating PostgreSQL in Kubernetes: A Homelab Christmas Adventure</a></h2>
<h3 id="introduction"><a class="toclink" href="2025/12/26/migrating-postgresql-in-kubernetes-a-homelab-christmas-adventure/#introduction">Introduction</a></h3>
<p>In a Production environment, upgrading databases is arguably one of the most critical and nerve-wracking tasks a DevOps or SRE team has to face. We all know someone (or <em>are</em> someone) who has a war story about a "simple" upgrade turning into a lost weekend spent recovering data.</p>
<p>In the era of Kubernetes, this pressure is compounded because the release velocity is so fast; you're often looking at a major version upgrade every 1 to 1.5 years. That is exactly why, in every company Iâ€™ve worked for, I always suggest using <strong>DB as a Service</strong> (like AWS RDS). Offload that pain to the cloud provider so you can sleep at night.</p>
<p>However, in my Homelab (<a href="https://github.com/datahub-local">Datahub.local</a>), I don't have that luxury (and the budget!). So, this holiday season, it was finally time to bite the bullet and upgrade my PostgreSQL cluster running on <strong>CloudNativePG (CNPG)</strong>.</p>
<h3 id="the-challenge-its-not-just-one-version"><a class="toclink" href="2025/12/26/migrating-postgresql-in-kubernetes-a-homelab-christmas-adventure/#the-challenge-its-not-just-one-version">The Challenge: It's Not Just One Version</a></h3>
<p><img alt="CNPG Upgrade Infographic" src="/img/cnpg-upgrade-info.png" width="50%"></p>
<p>Before diving into the "how," it's important to understand that with CloudNativePG, you aren't just managing one version. You are juggling two:
1.  <strong>The PostgreSQL Version</strong>
2.  <strong>The OS Version</strong> of the container image (usually Debian based)</p>
<p>Both have different End-of-Life (EOL) dates that you need to watch out for.</p>
<p><strong>PostgreSQL EOLs:</strong></p>
<table>
<thead>
<tr>
<th>Version</th>
<th>Release Date</th>
<th>EOL</th>
</tr>
</thead>
<tbody>
<tr>
<td>18</td>
<td>2025-09-25</td>
<td>2030-11-14</td>
</tr>
<tr>
<td>17</td>
<td>2024-09-26</td>
<td>2029-11-08</td>
</tr>
<tr>
<td>16</td>
<td>2023-09-14</td>
<td>2028-11-09</td>
</tr>
</tbody>
</table>
<p><strong>Debian OS EOLs:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Status</th>
<th>EOL</th>
</tr>
</thead>
<tbody>
<tr>
<td>Trixie (stable)</td>
<td>Supported</td>
<td>2030-06-30</td>
</tr>
<tr>
<td>Bookworm (oldstable)</td>
<td>Supported</td>
<td>2028-06-30</td>
</tr>
<tr>
<td>Bullseye</td>
<td>Deprecated</td>
<td>2026-08-31</td>
</tr>
</tbody>
</table>
<p>Depending on what you need to upgrade, the difficulty level changes exponentially.</p>
<p>More info on that can be found in the <a href="https://cloudnative-pg.io/docs/1.28/database_import#the-monolith-type">CNPG PostgreSQL Container Images</a>.</p>
<h3 id="rolling-update-level-easy-postgres-only"><a class="toclink" href="2025/12/26/migrating-postgresql-in-kubernetes-a-homelab-christmas-adventure/#rolling-update-level-easy-postgres-only">Rolling Update: Level Easy (Postgres Only)</a></h3>
<p>If you stick to the same OS, upgrading Postgres is trivial. You can go from Postgres 16 to 17 just by changing the image tag.</p>
<p><strong>Rolling Update</strong> means CNPG gradually replaces one pod at a time while maintaining the cluster's availabilityâ€”no downtime, no data movement needed.</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgresql.cnpg.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Cluster</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pg-cluster</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># Changing from 16 to 17 on the same OS (Bookworm)</span>
<span class="w">  </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ghcr.io/cloudnative-pg/postgresql:17-system-bookworm</span><span class="w"> </span>
<span class="w">  </span><span class="nt">instances</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">  </span><span class="nt">storage</span><span class="p">:</span>
<span class="w">    </span><span class="nt">size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1Gi</span>
</code></pre></div>
<h3 id="blue-green-update-level-advanced-postgres-os"><a class="toclink" href="2025/12/26/migrating-postgresql-in-kubernetes-a-homelab-christmas-adventure/#blue-green-update-level-advanced-postgres-os">Blue-Green Update: Level Advanced (Postgres + OS)</a></h3>
<p>This is where I found myself. I wanted to move from <strong>Postgres 16 on Bookworm</strong> to <strong>Postgres 17 on Trixie</strong>.</p>
<p>Here's the catch: <strong>You cannot do a direct rolling upgrade if the underlying OS changes.</strong> The glibc versions or other system libraries might differ, making the data directory incompatible or risky to upgrade in place.</p>
<p><strong>Blue-Green Update</strong> is the solutionâ€”you deploy an entirely new cluster alongside the old one, migrate data, then switch traffic over. This approach is safer when OS components differ, and it gives you a quick rollback option if issues arise.</p>
<h3 id="my-migration-strategy"><a class="toclink" href="2025/12/26/migrating-postgresql-in-kubernetes-a-homelab-christmas-adventure/#my-migration-strategy">My Migration Strategy</a></h3>
<p>Since I wanted the latest and greatest (and to reset the clock on those EOL dates), I opted for the advanced path. Here is the workflow I used to migrate with zero downtime for my apps.</p>
<h4 id="step-1-the-abstraction-layer"><a class="toclink" href="2025/12/26/migrating-postgresql-in-kubernetes-a-homelab-christmas-adventure/#step-1-the-abstraction-layer">Step 1: The Abstraction Layer</a></h4>
<p>First, I created a Kubernetes Service of type <code>ExternalName</code>. This acts as a pointer. I configured all my applications to talk to this Service (<code>pg-cluster-entrypoint</code>) instead of the actual CNPG service name.</p>
<p>This is crucial because it decouples the "address" my apps use from the actual cluster running behind the scenes.</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Service</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">"pg-cluster-entrypoint"</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ExternalName</span>
<span class="w">  </span><span class="c1"># Pointing to the CURRENT Postgres 16 cluster</span>
<span class="w">  </span><span class="nt">externalName</span><span class="p">:</span><span class="w"> </span><span class="s">'pg-cluster-rw.postgres.svc.cluster.local'</span>
<span class="w">  </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres</span>
<span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5432</span>
<span class="w">      </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span>
<span class="w">      </span><span class="nt">targetPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres</span>
</code></pre></div>
<h4 id="step-2-the-new-cluster"><a class="toclink" href="2025/12/26/migrating-postgresql-in-kubernetes-a-homelab-christmas-adventure/#step-2-the-new-cluster">Step 2: The New Cluster</a></h4>
<p>Next, I spun up a completely new cluster running <strong>Postgres 17 on Trixie</strong>. I used the <code>bootstrap.initdb.import</code> feature to pull data directly from the old cluster. More info on that can be found in the <a href="https://cloudnative-pg.io/docs/1.28/database_import#the-monolith-type">CloudNativePG docs</a>.</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgresql.cnpg.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Cluster</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pg-cluster-17</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ghcr.io/cloudnative-pg/postgresql:17-system-trixie</span>
<span class="w">  </span><span class="nt">instances</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">  </span><span class="nt">bootstrap</span><span class="p">:</span>
<span class="w">    </span><span class="nt">initdb</span><span class="p">:</span>
<span class="w">      </span><span class="nt">import</span><span class="p">:</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">monolith</span>
<span class="w">        </span><span class="nt">databases</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">"*"</span>
<span class="w">        </span><span class="nt">roles</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">"*"</span>
<span class="w">        </span><span class="nt">source</span><span class="p">:</span>
<span class="w">          </span><span class="nt">externalCluster</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">old-pg-cluster</span>
<span class="w">        </span><span class="nt">pgDumpExtraOptions</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--no-privileges</span>
<span class="w">  </span><span class="nt">storage</span><span class="p">:</span>
<span class="w">    </span><span class="nt">size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1Gi</span>
<span class="w">  </span><span class="nt">externalClusters</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">old-pg-cluster</span>
<span class="w">      </span><span class="nt">connectionParameters</span><span class="p">:</span>
<span class="w">        </span><span class="c1"># Connect to the OLD cluster</span>
<span class="w">        </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pg-cluster-rw.postgres.svc.cluster.local</span>
<span class="w">        </span><span class="nt">user</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres</span>
<span class="w">        </span><span class="nt">dbname</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres</span>
<span class="w">        </span><span class="nt">sslmode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">require</span>
<span class="w">      </span><span class="nt">password</span><span class="p">:</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pg-cluster-superuser</span>
<span class="w">        </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">password</span>
</code></pre></div>
<p>This creates a fresh cluster that starts life as a clone of the old one.</p>
<h4 id="step-3-the-switchover"><a class="toclink" href="2025/12/26/migrating-postgresql-in-kubernetes-a-homelab-christmas-adventure/#step-3-the-switchover">Step 3: The Switchover</a></h4>
<p>Once the new cluster was healthy and the data was synced, the magic happened. I simply updated the <code>ExternalName</code> service to point to the new cluster.</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Service</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">"pg-cluster-entrypoint"</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ExternalName</span>
<span class="w">  </span><span class="c1"># Update DNS to point to the NEW Postgres 17 cluster</span>
<span class="w">  </span><span class="nt">externalName</span><span class="p">:</span><span class="w"> </span><span class="s">'pg-cluster-17-rw.postgres.svc.cluster.local'</span>
<span class="w">  </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres</span>
<span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5432</span>
<span class="w">      </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span>
<span class="w">      </span><span class="nt">targetPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres</span>
</code></pre></div>
<p>My applications started resolving the DNS to the new IP, and the migration was complete. I verified everything was working, and then decommissioned the old cluster.</p>
<h3 id="conclusion"><a class="toclink" href="2025/12/26/migrating-postgresql-in-kubernetes-a-homelab-christmas-adventure/#conclusion">Conclusion</a></h3>
<p>While upgrading databases in a Homelab doesn't carry the same financial risk as production, itâ€™s a great playground to practice these "Advanced Level" patterns. Using an <code>ExternalName</code> service as a stable interface allowed me to swap the underlying infrastructure without having to reconfigure a single application.</p>
<p>The process was surprisingly smooth, and now I'm set with the latest Postgres and OS versions for years to come. Hope this helps anyone else planning their holiday upgrades!</p>
<p>Happy New Year 2025! ðŸŽ‰</p>
    
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://avatars.githubusercontent.com/u/734567?v=4" alt="Alvaro Santos Andres">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-04-02 00:00:00+00:00">April 2, 2024</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="category/devops/" class="md-meta__link">DevOps</a>, 
              <a href="category/datahublocal/" class="md-meta__link">Datahub.local</a></li>
        
        
          
          <li class="md-meta__item">
            
              6 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="yet-another-kubernetes-to-do-list"><a class="toclink" href="2024/04/02/yet-another-kubernetes-to-do-list/">Yet Another Kubernetes To-Do List</a></h2>
<p>Ever noticed how easy it is to kickstart your app on Kubernetes locally? Just a couple of commands and boom â€“ it's up and running! But let's face it, real-world setups are a whole different ball game.</p>
<p>Take my <a href="https://datahub-local.alvsanand.com/">Datahub.local</a> project, for example. It's not just a data platform; it's a whole ecosystem of things running on Kubernetes. I've also got monitoring, storage solutions, CI/CD pipelines and many more. So suddenly, The initial simplicity feels like a distant dream.</p>
<p><img alt="Kubernetes To-Do List" src="/img/kubernetes-to-do-list.png" width="80%"></p>
<h3 id="1-select-a-kubernetes-distribution"><a class="toclink" href="2024/04/02/yet-another-kubernetes-to-do-list/#1-select-a-kubernetes-distribution">1. Select a Kubernetes Distribution</a></h3>
<p>Choosing the right Kubernetes distribution is crucial, especially considering your specific needs and infrastructure requirements. Options range from full-fledged, self-managed distributions like vanilla Kubernetes to lightweight solutions tailored for low-end devices.</p>
<ul>
<li><strong>Vanilla</strong>: Ideal for environments where customization and control are paramount, <a href="https://kubernetes.io/">vanilla Kubernetes</a> offers the flexibility to tailor the cluster to your exact specifications. However, it may require more manual configuration and maintenance efforts.</li>
<li><strong>Managed</strong>: Platforms like <a href="https://cloud.google.com/kubernetes-engine">Google Kubernetes Engine (GKE)</a>, <a href="https://aws.amazon.com/es/eks/">Amazon Elastic Kubernetes Service (EKS)</a>, and <a href="https://azure.microsoft.com/es-es/products/kubernetes-service/">Microsoft Azure Kubernetes Service (AKS)</a> provide fully managed Kubernetes clusters, abstracting away much of the underlying infrastructure management. They're great for teams looking to offload operational overhead and focus on application development.</li>
<li><strong>Enterprise</strong>: Solutions like <a href="https://www.redhat.com/en/technologies/cloud-computing/openshift">Red Hat OpenShift</a>, <a href="https://www.rancher.com/">Rancher</a> or <a href="https://www.vmware.com/products/vsphere/vsphere-with-tanzu.html">VMware Tanzu</a> offer enterprise-grade features and support, making them suitable for organizations with complex deployment requirements and regulatory compliance needs.</li>
<li><strong>Lightweight</strong>: For resource-constrained environments or low-end devices, lightweight Kubernetes distributions like <a href="https://docs.k3s.io/">K3s</a> or <a href="https://microk8s.io/">MicroK8s</a> are excellent choices. k3s is optimized for production workloads in resource-constrained environments, while MicroK8s provides a lightweight, easy-to-install Kubernetes for development and testing purposes. These distributions offer reduced resource overhead and simplified installation, making them ideal for edge computing or IoT deployments.</li>
</ul>
<p>Consider factors such as ease of deployment, scalability, support, and compatibility with your existing infrastructure when evaluating Kubernetes distributions. Choose the one that best fits your project requirements and long-term goals, ensuring a smooth and efficient Kubernetes deployment experience.</p>
<h3 id="2-storage-and-backup-strategy"><a class="toclink" href="2024/04/02/yet-another-kubernetes-to-do-list/#2-storage-and-backup-strategy">2. Storage and Backup Strategy</a></h3>
<p>Now it's time to review storage and backup â€“ the backbone of our data resilience. Now, when it comes to picking the right storage solutions, we've got some solid options on the table. <strong>Longhorn</strong> and <strong>Rook/Ceph</strong> are likely your best bets for storage services.</p>
<p>Think of <a href="https://longhorn.io/">Longhorn</a> as your go-to buddy for block storage. It's sleek, easy to use, and packs a punch when it comes to reliability. With features like built-in backup and restore capabilities, it's like having a safety net for your critical data.</p>
<p>Now, if you're into distributed file systems, <a href="https://rook.io/">Rook/Ceph</a> is the big name of the market. It's like having your own personal cloud storage solution right in your Kubernetes cluster including its own S3 compatible solution. Plus, with Rook's seamless integration with Kubernetes, setting up and managing Ceph clusters becomes a breeze.</p>
<p>So, whether you're storing mission-critical databases or hosting media files for your next big app, Longhorn and Rook/Ceph have got you covered. Keep your data safe, keep it resilient.</p>
<h3 id="3-securing-external-services"><a class="toclink" href="2024/04/02/yet-another-kubernetes-to-do-list/#3-securing-external-services">3. Securing External Services</a></h3>
<p>Alright, let's talk about locking down those external services trying to cozy up with your Kubernetes cluster. You don't want just anyone waltzing in and causing chaos, right?</p>
<p>So, first things first, let's beef up that security. Consider using an Ingress controller with TLS termination. You are ensuring encrypted communication between your services and the outside world. Plus, it adds that extra layer of protection against eavesdroppers.</p>
<p>Now, onto authentication â€“ because not everyone should get access. <a href="https://oauth2-proxy.github.io/oauth2-proxy/">OAuth2 Proxy</a> can be your best friend here. Think of them as the gatekeepers who verify everyone's credentials before they're allowed in. With an OAuth2 Proxy you can use providers like Google, Github, Keycloak or Dex, you can enforce user authentication and authorization policies, making sure only authorized users can interact with your services.</p>
<p>But wait, there's more! Ever heard of <a href="https://www.cloudflare.com/es-es/products/tunnel/">Cloudflare Tunnel</a>? It's like your service's secret agent, keeping it hidden from prying eyes on the internet. Instead of exposing your services directly, Cloudflare Tunnel acts as a secure conduit, routing traffic through Cloudflare's network without exposing your server's IP address.</p>
<h3 id="4-certificate-management"><a class="toclink" href="2024/04/02/yet-another-kubernetes-to-do-list/#4-certificate-management">4. Certificate Management</a></h3>
<p>What about managing certificates in Kubernetes? <a href="https://cert-manager.io/">Cert-Manager</a>'s got your back. It's like your personal assistant for all things TLS certificates. With Cert-Manager, you can automate the whole shebang â€“ issuing, renewing, and revoking certificates â€“ without breaking a sweat.</p>
<p>Oh, and here's a pro tip: even for your local setups, consider using your own domain. Yeah, I know it sounds fancy, but trust me, it's worth it. It keeps things consistent across all environments, from local to production.</p>
<h3 id="5-securing-secrets"><a class="toclink" href="2024/04/02/yet-another-kubernetes-to-do-list/#5-securing-secrets">5. Securing Secrets</a></h3>
<p>Keeping your sensitive data safe is like guarding the treasure chest of your app. With Kubernetes, you've got options aplenty for secret storage. You could start with the classic vanilla <a href="https://kubernetes.io/docs/concepts/configuration/secret/">Secrets</a>, where your secrets are stored in your cluster's etcd database. It gets the job done, but it's like hiding your keys under the doormat â€“ not the most secure option out there.</p>
<p>If you want to step up your game, consider <a href="https://sealed-secrets.netlify.app/">Sealed Secrets</a>. Think of them as secret messages locked tight with encryption, so even if someone snoops around, they can't make heads or tails of your precious data.</p>
<p>Then there's <a href="https://external-secrets.io/latest/">External Secrets</a>, where you outsource secret management to specialized tools like HashiCorp Vault or AWS Secrets Manager. It's like having a super-secure vault guarded by dragons â€“ nobody's getting in without the right keys.</p>
<p>No matter which route you choose, make sure to encrypt your secrets at rest and in transit. Rotate them regularly like changing the combination on a safe, and you'll sleep soundly knowing your secrets are safe and sound.</p>
<h3 id="6-deployment-automation-with-gitops-cd-tool"><a class="toclink" href="2024/04/02/yet-another-kubernetes-to-do-list/#6-deployment-automation-with-gitops-cd-tool">6. Deployment Automation with GitOps CD Tool</a></h3>
<p>Say goodbye to manual deployment headaches and hello to streamlined automation with GitOps Continuous Delivery (CD) tools like <a href="https://fluxcd.io/">Flux</a> and <a href="https://argo-cd.readthedocs.io/en/stable/">Argo CD</a>. These tools take the hassle out of managing Kubernetes resources by syncing your cluster state with version-controlled Git repositories.</p>
<p>With <a href="https://fluxcd.io/">Flux</a>, you can define your desired cluster state in Git and let Flux automatically apply those changes to your cluster, keeping everything in sync effortlessly. It's like having a trusty assistant who ensures your applications are always up-to-date without you lifting a finger.</p>
<p>On the other hand, <a href="https://argo-cd.readthedocs.io/en/stable/">Argo CD</a> provides a slick user interface for visualizing and managing your Kubernetes applications. Simply declare your desired state in Git, and Argo CD will continuously monitor your repository for changes, automatically applying them to your cluster. It's like having a personal Kubernetes concierge, always ready to cater to your deployment needs.</p>
<p>Whether you prefer Flux's simplicity or Argo CD's user-friendly interface, embracing GitOps principles with these CD tools will revolutionize your deployment workflows, making them smoother, more reliable, and ultimately more enjoyable.</p>
<h3 id="7-monitoring-and-observability-stack"><a class="toclink" href="2024/04/02/yet-another-kubernetes-to-do-list/#7-monitoring-and-observability-stack">7. Monitoring and Observability Stack</a></h3>
<p>Next thing you want to keep a close eye on is what's happening in your Kubernetes cluster, right?</p>
<p>First up, we've got the <a href="https://github.com/prometheus-operator/kube-prometheus">kube-prometheus-stack</a>. It's like your Swiss Army knife for Kubernetes monitoring. With <a href="https://prometheus.io/">Prometheus</a> for metrics and <a href="https://grafana.com/">Grafana</a> for visualization, it's a powerhouse combo that gives you all the insights you need into your cluster's health and performance. Besides, you can install <a href="https://github.com/grafana/loki">Loki</a> for logs aggregation.</p>
<p>But hey, maybe you're not into managing all that yourself. No worries! There are some fantastic SaaS options like <a href="https://www.datadoghq.com/">Datadog</a> and <a href="https://www.dynatrace.com/">Dynatrace</a>. These guys handle all the heavy lifting for you, giving you top-notch monitoring and observability without the hassle of managing your own stack.</p>
<p>Plus, there are tools like <a href="https://home.robusta.dev/">Robusta</a> which can help automate essential SRE actions, saving you time and headaches.</p>
<p>So whether you choose one or another depends on free cost or prefer the convenience of a managed service, there's something out there to suit your monitoring needs.</p>
    
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://avatars.githubusercontent.com/u/734567?v=4" alt="Alvaro Santos Andres">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-03-02 00:00:00+00:00">March 2, 2024</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="category/hardware/" class="md-meta__link">Hardware</a>, 
              <a href="category/datahublocal/" class="md-meta__link">Datahub.local</a></li>
        
        
          
          <li class="md-meta__item">
            
              4 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="5-essential-things-to-know-before-building-your-homelab"><a class="toclink" href="2024/03/02/5-essential-things-to-know-before-building-your-homelab/">5 Essential Things to Know Before Building Your Homelab</a></h2>
<p>In my previous post, <a href="2024/02/04/homelab-for-begineers/">Homelab For Begineers</a>, I provided a general overview of what a Homelab is, why you might want one, and a brief discussion of its architecture and components. After several weeks of hard work, patience, and even a few tears, I'm excited to announce that my own Homelab is finally up and running.</p>
<p><img alt="Back of the case" src="https://datahub-local.alvsanand.com/assets/img/hardware_case_back.jpg" width="300">
<img alt="Final assembly" src="https://datahub-local.alvsanand.com/assets/img/hardware_case_final.jpg" width="300"></p>
<p>Rather than diving into the specifics of how I assembled it, I believe it's more beneficial to share a list of key insights that I wish I had known before embarking on this journey.</p>
<p>And if you're curious to see how I set up my own Homelab, you can find a detailed guide at <a href="https://datahub-local.alvsanand.com/cluster_setup/hardware/">DataHub.local</a>.</p>
<h3 id="1-plan-measure-implement"><a class="toclink" href="2024/03/02/5-essential-things-to-know-before-building-your-homelab/#1-plan-measure-implement">1. Plan, Measure, Implement</a></h3>
<p>In the realm of Homelab building, the mantra of "plan, measure, implement" cannot be overstated. While your design may appear flawless in your mind's eye, the reality of physical space and component compatibility can present unforeseen challenges.</p>
<p>Some advice includes:</p>
<ul>
<li><strong>Design Carefully</strong>: Begin by sketching out an architecture diagram and listing all necessary steps, components, and tools required for your project. Don't forget to include even the smallest details, such as screws and cables.</li>
<li><strong>Measure Everything</strong>: Precision is key when it comes to constructing custom cabinets or arranging equipment within your Homelab. Measure distances between holes and components accurately, and visually assess how devices fit together. Account for the space occupied by cables and connectors, ensuring proper ventilation to prevent overheating.</li>
</ul>
<h3 id="2-dont-be-too-perfectionist"><a class="toclink" href="2024/03/02/5-essential-things-to-know-before-building-your-homelab/#2-dont-be-too-perfectionist">2. Don't Be Too Perfectionist</a></h3>
<p>It's easy to fall into the trap of perfectionism. However, it's essential to remember that functionality should always take precedence over aesthetics.</p>
<p>Focus on achieving your primary objectives, such as ventilation, accesibility, and future upgradability, rather than obsessing over minor imperfections or cosmetic flaws. Remember that the true value of your Homelab lies in its ability to support your learning, experimentation, and personal projects, regardless of its appearance.</p>
<p>By prioritizing functionality and adopting a more forgiving attitude toward imperfections, you can alleviate stress, maintain momentum, and ultimately enjoy a more fulfilling Homelab experience.</p>
<h3 id="3-without-3d-printing-adaptation-and-assembly-can-be-challenging"><a class="toclink" href="2024/03/02/5-essential-things-to-know-before-building-your-homelab/#3-without-3d-printing-adaptation-and-assembly-can-be-challenging">3. Without 3D Printing, Adaptation and Assembly Can Be Challenging</a></h3>
<p>In the world of Homelab construction, the ability to adapt and customize components to fit your specific needs is invaluable. However, without access to a 3D printer, achieving this level of customization can be challenging.</p>
<p>When faced with non-standard requirements or unique configurations, the lack of 3D printing capabilities may limit your options for adapting components or creating custom enclosures. This can result in a more cumbersome assembly process, as you may need to rely on makeshift solutions or compromise on your original design vision.</p>
<p>To overcome this limitation, consider exploring alternative methods of modification, such as using off-the-shelf enclosures and mounting hardware creatively. Additionally, leverage online communities and forums to seek advice and share ideas with fellow enthusiasts who may have encountered similar challenges.</p>
<h3 id="4-have-a-well-stocked-warehouse-neighbor-or-familiar-nearby"><a class="toclink" href="2024/03/02/5-essential-things-to-know-before-building-your-homelab/#4-have-a-well-stocked-warehouse-neighbor-or-familiar-nearby">4. Have a Well-Stocked Warehouse, Neighbor, or Familiar Nearby</a></h3>
<p>No matter how meticulously you plan your project, unexpected needs and challenges are bound to arise. Having access to a well-stocked warehouse, a helpful neighbor with a diverse tool collection, or a familiar nearby can be a lifesaver in such situations.</p>
<p>From realizing you're missing a critical component to encountering unforeseen compatibility issues, having a nearby resource can save you time, money, and frustration. Whether it's borrowing a specialized tool, sourcing a last-minute replacement part, or simply seeking advice from a knowledgeable neighbor, having support nearby can make all the difference in successfully completing your project.</p>
<h3 id="5-customs-exists"><a class="toclink" href="2024/03/02/5-essential-things-to-know-before-building-your-homelab/#5-customs-exists">5. Customs exists</a></h3>
<p>A significant consideration for Homelab enthusiasts, especially those sourcing equipment internationally, is the impact of customs regulations.</p>
<p>As of July 1, 2021, a <a href="[EU law](https://taxation-customs.ec.europa.eu/buying-goods-online-coming-non-european-union-country_en)">new EU law</a> has altered the landscape of importing goods from non-European Union countries, particularly from China. This legislation aims to level the playing field between Chinese and EU suppliers, but it introduces complexities for consumers.</p>
<p>Key changes include:</p>
<ul>
<li>Goods under 150 euros: Consumers are subject to additional VAT charges, typically managed by the seller.</li>
<li>Goods over 150 euros: In addition to VAT, consumers must pay additional duties and fees, which can be time-consuming and costly.</li>
</ul>
<p>Navigating customs can be a daunting task, as I learned firsthand. The process often involves learning the intricacies of customs procedures and enduring unexpected delays and expenses. In my case, I encountered a three-week delay and unexpected fees for customs services and package handling.</p>
<p>For those residing in Spain, a helpful resource on customs regulations can be found in <a href="https://wise.com/es/blog/tasas-aduanas-espana">this</a> article, providing valuable insights into navigating the complexities of importing goods.</p>
<hr>
<p>Lastly, I hope these tips come in handy for your future Homelab adventures. Remember, it's all about having fun and getting things done, even if it's not perfect. So dive in, get creative, and enjoy the ride! Here's to an awesome Homelab project ahead. Cheers!</p>
    
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://avatars.githubusercontent.com/u/734567?v=4" alt="Alvaro Santos Andres">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-02-04 00:00:00+00:00">February 4, 2024</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="category/general/" class="md-meta__link">General</a>, 
              <a href="category/hardware/" class="md-meta__link">Hardware</a>, 
              <a href="category/datahublocal/" class="md-meta__link">Datahub.local</a></li>
        
        
          
          <li class="md-meta__item">
            
              6 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="homelab-for-begineers"><a class="toclink" href="2024/02/04/homelab-for-begineers/">Homelab For Begineers</a></h2>
<p>Another week brings with it a new update on <a href="https://www.alvsanand.com/datahub-local/">Datahub.local</a>. In our previous post <a href="2024/01/28/journey-to-datahublocal/">Journey to Datahub.local</a>, we saw a general overview of how I plan to execute this project with details about goals, steps and some rules. This time, we're delving into the realm of <strong>Homelabs</strong> or <strong>Home Labs</strong>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In this article, I will exclusively concentrate on the hardware perspective. Subsequent topics to be covered in the future will include areas such as operating systems, bootstrapping, application orchestration, security, and more.</p>
</div>
<h3 id="what-is-a-homelab"><a class="toclink" href="2024/02/04/homelab-for-begineers/#what-is-a-homelab">What is a Homelab?</a></h3>
<p><img alt="Homelab" src="/img/homelab.jpg" width="50%"></p>
<p>If <em>Homelab</em> is as foreign word to you as a penguin in the desert, let me break it down for you. A Homelab is like having your own little tech playground at home â€“ a server or a bunch of them where you can host any kind of applications and services.</p>
<p>Furthermore, a <em>Homelab</em> is a dedicated space where IT enthusiasts and professionals can experiment with various hardware and software configurations in a controlled environment. It's essentially a mini data center at home, providing a hands-on experience for learning, testing, and skill development.</p>
<h3 id="why-do-you-need-a-homelab"><a class="toclink" href="2024/02/04/homelab-for-begineers/#why-do-you-need-a-homelab">Why do you need a homelab?</a></h3>
<p>You don't but setting up a Homelab is a powerful tool for personal and professional growth in the IT field. It allows you to:</p>
<ul>
<li><strong>Gain Practical Experience</strong>: Homelabs provide a platform to apply theoretical knowledge in a real-world setting, helping you build confidence in your skills.</li>
<li><strong>Test New Technologies</strong>: Stay ahead of the curve by experimenting with the latest technologies and software without the fear of disrupting a production environment.</li>
<li><strong>Enhance Troubleshooting Skills</strong>: Encounter and resolve issues in a controlled environment, honing your ability to troubleshoot and debug problems effectively.</li>
</ul>
<h3 id="components"><a class="toclink" href="2024/02/04/homelab-for-begineers/#components">Components</a></h3>
<p>A well-rounded Homelab typically includes the following components:</p>
<pre class="mermaid"><code>graph TB
  subgraph SR ["Server Rack / Cabinet"]
    subgraph C [Computing Hardware]
      S1[Server 1]
      S2[Server 2]
      DP[Desktop PC]
    end

    subgraph N [Networking Equipment]
      R[Router]
      R[Switch]
      A[Access Point]
    end

    subgraph S [Storage Solutions]
      LS[Local Storage]
      NAS[NAS]
      CS[Cloud Storage]
    end

    subgraph P [Power Management]
      UPS[UPS]
      PS[Power Supply]
    end

    CM[Cable Management]
  end

  P --&gt; C --&gt; N &amp; S
  UPS --&gt; PS
  S1 &lt;--&gt; S2 &lt;--&gt; DP</code></pre>
<p>Understanding how these components interact is essential for creating a functional and efficient Homelab.</p>
<h4 id="computing-hardware"><a class="toclink" href="2024/02/04/homelab-for-begineers/#computing-hardware">Computing Hardware</a></h4>
<p>Compute infrastructure forms the backbone of a Homelab and typically includes servers and client machines. These can range from repurposed desktop computers to dedicated server hardware. These machines run various virtual machines or containers, enabling users to create and manage different computing environments.</p>
<ul>
<li><strong>Servers</strong>: Dedicated server hardware, such as enterprise-grade servers, repurposed desktop computers, or rack-mounted servers. These servers run virtual machines or containers to create different computing environments.</li>
<li><strong>Workstations</strong>: High-performance desktops and laptops for various tasks, including development, testing, and running specific applications.</li>
<li><strong>Microcontrollers</strong>: Small devices like Raspberry Pi or Arduino for projects requiring low-power consumption or specialized functionalities.</li>
</ul>
<h4 id="networking-equipment"><a class="toclink" href="2024/02/04/homelab-for-begineers/#networking-equipment">Networking Equipment</a></h4>
<p>Networking components are needed for connecting the computing devices.</p>
<ul>
<li><strong>Routers</strong>: Home routers for basic networking needs or enterprise-grade routers for more advanced configurations.</li>
<li><strong>Switches</strong>: Unmanaged switches for simple setups or managed switches for network customization and optimization.</li>
<li><strong>Access Points</strong>: Single-band or dual-band access points for wireless networking within the Homelab.</li>
</ul>
<h4 id="storage-solutions"><a class="toclink" href="2024/02/04/homelab-for-begineers/#storage-solutions">Storage Solutions</a></h4>
<p>Data is the essential aspect of any Homelab. Having a well-organized storage setup is key for running applications and storing the data. Therefore, choose storage solutions based on capacity and performance requirements.</p>
<ul>
<li><strong>Local Storage</strong>: Hard disk drives (HDD) or solid-state drives (SSD) for storing data on individual servers or workstations.</li>
<li><strong>Network-Attached Storage (NAS)</strong>: Dedicated NAS devices or DIY NAS setups using software like FreeNAS to centralize storage.</li>
<li><strong>Cloud Storage</strong>: Utilizing cloud storage services such as AWS S3 or Google Cloud Storage for offsite backups or data sharing.</li>
</ul>
<h4 id="power-management"><a class="toclink" href="2024/02/04/homelab-for-begineers/#power-management">Power Management</a></h4>
<p>Ensuring a stable power to our devices is crucial for the reliability. Besides, we need also ways to protect against power outages and provide time to shut down equipment properly.</p>
<ul>
<li><strong>Power Supplies</strong>: Standard ATX power supplies for individual components or redundant power supplies for servers.</li>
<li><strong>Uninterruptible Power Supplies (UPS)</strong>: Line-interactive or online UPS to protect against power outages and provide time for proper shutdown.</li>
</ul>
<h4 id="organization-tools"><a class="toclink" href="2024/02/04/homelab-for-begineers/#organization-tools">Organization Tools</a></h4>
<p>Using tools for organizing the rest of components is essential to have an efficient and tidy Homelab setup. hey help maximize space, improve airflow, and provide a structured environment for your components. Proper organization enhances accessibility and aesthetics.</p>
<ul>
<li><strong>Server Racks</strong>: An open structure with vertical mounting rails, lacking side panels and doors. </li>
<li><strong>Cabinets</strong>: An enclosed structure with side panels, front/rear doors, and often locking mechanisms. Provides additional security, protection from dust, and controlled airflow. Suitable for a neater appearance and reduced noise.</li>
<li><strong>Cable Management</strong>: Cable organizers and ties for maintaining a clean and organized cabling infrastructure.</li>
</ul>
<h3 id="cool-ideas-for-your-homelab"><a class="toclink" href="2024/02/04/homelab-for-begineers/#cool-ideas-for-your-homelab">Cool Ideas for Your Homelab</a></h3>
<p><img alt="Apps" src="/img/apps.png"></p>
<p>Now that you have your Homelab set up, the possibilities are endless for exciting projects and experiments. Here are some cool ideas to spark your creativity:</p>
<ul>
<li><strong>Home Automation Hub</strong>: Transform your Homelab into a central hub for home automation. Use platforms like Home Assistant or OpenHAB to control smart devices, set up routines, and experiment with IoT (Internet of Things) integrations.</li>
<li><strong>Media Server</strong>: Create a media server to centralize your music, movies, and TV shows. Platforms like Plex or Jellyfin allow you to organize and stream your media collection to various devices within your home network.</li>
<li><strong>Private Cloud Services</strong>: Explore self-hosted cloud services using tools like Nextcloud or ownCloud. Set up your private cloud for file storage, calendar, contacts, and more, providing an alternative to commercial cloud solutions.</li>
<li><strong>Game Server Hosting</strong>: Host your own game servers for popular titles or create a Minecraft server for you and your friends. It's a fun way to enjoy gaming while managing server configurations and networking.</li>
<li><strong>Dockerized Applications</strong>: Experiment with containerization using Docker. Deploy applications like WordPress, GitLab, or Grafana in containers, making it easy to manage, update, and scale your services.</li>
<li><strong>DevOps Playground</strong>: Turn your Homelab into a DevOps playground. Practice continuous integration and deployment (CI/CD) pipelines, container orchestration with Kubernetes, and explore infrastructure as code (IaC) with tools like Ansible or Terraform.</li>
<li><strong>Network Monitoring</strong>: Set up network monitoring tools such as Nagios, Prometheus, or Grafana to gain insights into your Homelab's performance. Monitor bandwidth, device health, and other metrics to enhance your networking skills.</li>
<li><strong>Machine Learning Playground</strong>: Explore machine learning and artificial intelligence in your Homelab. Set up Jupyter Notebooks, TensorFlow, or other ML frameworks to experiment with data analysis, model training, and predictive analytics.</li>
</ul>
<h3 id="tips-to-create-a-low-cost-homelab"><a class="toclink" href="2024/02/04/homelab-for-begineers/#tips-to-create-a-low-cost-homelab">Tips to Create a Low-cost Homelab</a></h3>
<p>Finally, I'll be sharing some tips for assembling your own Homelab without breaking the bank. Keep in mind that building a functional Homelab doesn't have to strain your finances. Here are some frugal tips to consider:</p>
<ul>
<li><strong>Reuse Old Hardware</strong>: Give a new purpose to old computers and laptops by transforming them into servers or testing machines.</li>
<li><strong>Buy Microcontrollers</strong>: buy budget devices like Raspberry Pi, which not only come at a lower cost but can also serve for running small applications.</li>
<li><strong>Open-source Software</strong>: Leverage free and open-source software for virtualization, networking, and storage solutions.</li>
<li><strong>Energy-efficient Components</strong>: Opt for energy-efficient hardware to save on electricity costs.</li>
<li><strong>Start small</strong>: Familiarize yourself with the process through a small-scale project. As you gain more experience, you can advance to larger and more sophisticated setups.</li>
</ul>
<h3 id="conclusion"><a class="toclink" href="2024/02/04/homelab-for-begineers/#conclusion">Conclusion</a></h3>
<p>In summary, a Homelab proves to be a flexible resource for IT enthusiasts of all expertise levels. Whether you're a novice eager to delve into fundamentals or a seasoned professional aiming to stay abreast of cutting-edge technologies, a Homelab offers a dynamic and adaptable learning space. Begin modestly, and witness your Homelab expand in tandem with your IT proficiency.</p>
<p>Keep in mind that the crucial aspect is aligning your Homelab projects with your specific interests and objectives. Just make it <strong>fun</strong> and <strong>enjoyable</strong> so your <strong>learning journey</strong> will be a great success.</p>
    
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://avatars.githubusercontent.com/u/734567?v=4" alt="Alvaro Santos Andres">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-01-28 00:00:00+00:00">January 28, 2024</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="category/general/" class="md-meta__link">General</a>, 
              <a href="category/datahublocal/" class="md-meta__link">Datahub.local</a>, 
              <a href="category/learning/" class="md-meta__link">Learning</a></li>
        
        
          
          <li class="md-meta__item">
            
              2 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="journey-to-datahublocal"><a class="toclink" href="2024/01/28/journey-to-datahublocal/">Journey to Datahub.local</a></h2>
<p>Hey there! If my previous post, <a href="202401_embracing-the-challenge.md">Embracing the Challenge</a>, you know Iâ€™m on a mission in 2024. The quest? Crafting my own Data Platform from scratch called <a href="https://www.alvsanand.com/datahub-local/">Datahub.local</a>. Itâ€™s not just about data â€“ itâ€™s about diving headfirst into the unknown, learning, experimenting, and enjoying the ride. In this article, we're going to map out the game plan for this adventure.</p>
<p><img alt=" Journey to Datahub.local" src="/img/datahub-local-plan.png"></p>
<h3 id="goals"><a class="toclink" href="2024/01/28/journey-to-datahublocal/#goals">Goals</a></h3>
<p>Embarking on this project requires clear objectives. Let's delve into the goals that will shape my journey.</p>
<ol>
<li><strong>Hands-On Experience</strong>: Dive into practical applications to solidify learning.</li>
<li><strong>Self-Directed Learning</strong>: Take charge of my educational path and explore diverse aspects of data management.</li>
<li><strong>Experimentation &amp; Innovation</strong>: Encourage creative problem-solving and novel approaches.</li>
<li><strong>Portfolio Development</strong>: Build a showcase of skills and projects for professional growth.</li>
<li><strong>Real Experience</strong>: Implement the acquired knowledge in real-world scenarios.</li>
</ol>
<h3 id="whats-the-game-plan"><a class="toclink" href="2024/01/28/journey-to-datahublocal/#whats-the-game-plan">Whatâ€™s the game plan?</a></h3>
<p>With the goals established, it's time to devise a concrete plan that will guide my efforts and actions.</p>
<ol>
<li><strong>Create my own Homelab</strong>: Opt for a cost-effective approach by building a Homelab using small ARM devices, steering clear of excessive cloud expenses.</li>
<li><strong>Deploy Base Components</strong>: Establish the foundation for the Data Platform with a Kubernetes cluster. Bootstrap it with DevOps components like ArgoCD, Prometheus, Grafana, etc., ensuring security and performance.</li>
<li><strong>Build the Data Platform</strong>: Design and deploy a tailored Modern Data infrastructure, aligning with personal requirements and preferences.</li>
<li><strong>Develop an E2E use case</strong>: Develop a meaningful data project to gain practical experience and evaluate the strengths and weaknesses of the new tools. Move beyond the traditional "hello world" approach.</li>
</ol>
<h3 id="principles"><a class="toclink" href="2024/01/28/journey-to-datahublocal/#principles">Principles</a></h3>
<p>Finally, every project needs a compass. So, here are some principles to keep things on track and fun.</p>
<ul>
<li><strong>Learn and Enjoy</strong>: Prioritize the enjoyment of the learning process.</li>
<li><strong>Set Budget and Time Constraints</strong>: Be proactive by defining a budget and timeframe, allowing for efficient progress.</li>
<li><strong>Flexibility</strong>: Postpone tasks that don't contribute to enjoyment or learning.</li>
<li><strong>Innovation</strong>: Embrace new components, software, or techniques, even if they aren't the best â€“ the goal is to innovate.</li>
</ul>
<p>And there you have it, folks! This sets the stage for my project. Next up, I'll spill the tea on the hardware I've snagged as I gear up for the exciting phase of implementation. Stay tuned for the next update!</p>
    
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://avatars.githubusercontent.com/u/734567?v=4" alt="Alvaro Santos Andres">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-01-22 00:00:00+00:00">January 22, 2024</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="category/general/" class="md-meta__link">General</a>, 
              <a href="category/datahublocal/" class="md-meta__link">Datahub.local</a>, 
              <a href="category/learning/" class="md-meta__link">Learning</a></li>
        
        
          
          <li class="md-meta__item">
            
              2 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="embracing-the-challenge"><a class="toclink" href="2024/01/22/embracing-the-challenge/">Embracing the Challenge</a></h2>
<p><img align="left" alt="Embracing the Challenge" src="/img/embracing-the-challenge.jpg" width="35%"></p>
<p>With over 15 years as a <strong>software engineer</strong>, my journey has been a rollercoaster of jobs across various companies and teams â€” some great, some not so much. One revelation that I had is <strong>how fast the technology evolves</strong>. In just a few short years, your tech portfolio can become outdated, a relic of a bygone era. Although I've never considered myself a genius, what I do possess is an <strong>unwavering determination and consistency</strong>. Identifying my weaknesses has been key, whether in personal growth or, in this context, keeping up to date. </p>
<p>As explained before, change is the only constant in the IT work and you must adapt to it, especially from a technological standpoint. Over the past decade, I dedicated significant time to staying current â€” a pursuit that has proven both <strong>gratifying and demanding</strong>. The knowledge acquired has empowered me to accomplish tasks that seemed unimaginable just a year earlier. The magic happens when you step <strong>out of your comfort zone</strong>.</p>
<p>Here's a brief compilation of activities to help you step outside your comfort zone:</p>
<ul>
<li><strong>Seek Feedback:</strong> Actively gather feedback from peers to identify areas for improvement.</li>
<li><strong>Explore New Opportunities:</strong> If growth stagnates, don't hesitate to explore new job opportunities or challenges.</li>
<li><strong>Never Stop Learning:</strong> Learning is the lifeline of our industry. Constantly evolve by staying informed and acquiring new skills.</li>
</ul>
<p>And speaking of learning, here are some effective ways to do it:</p>
<ul>
<li><strong>Stay Updated:</strong> Engage with relevant sources such as Reddit groups, tech personalities, or media (YouTube channels, podcasts).</li>
<li><strong>E-Learning and Reading:</strong> Enroll in courses on e-learning platforms or dive into insightful books. These are particularly beneficial for beginners.</li>
<li><strong>Certifications Matter:</strong> Pursue certifications that are in high demand. It's a challenging journey but adds valuable personal experience.</li>
<li><strong>Dive into New Projects:</strong> Participate in open-source initiatives or start your projects for a more hands-on learning experience.</li>
</ul>
<p>As we enter the year 2024, I feel the need to take on something distinct, personal, and significant â€” an activity that propels me far beyond my comfort zone. Hence, I would like to start a new project called <a href="https://datahub-local.alvsanand.com/"><strong>Datahub.local</strong></a>. Over the upcoming months, my goal is to conceive, create, and sustain <strong>a personalized Data Platform</strong> that can be operated within the confines of my home. This will afford me the opportunity to engage in exploration, experimentation, and, most importantly, <strong>learn from failures</strong>. Additional details will be shared in forthcoming articles.</p>
<p><img alt="Datahub.local" src="https://alvsanand.com/datahub-local/assets/img/logo.png" width="40%"></p>
<p>So, buckle up, because my new journey of <strong>reinvention has just begun</strong>.</p>
    
    
  </div>
</article>
      
      
        
          



<nav class="md-pagination">
  
</nav>
        
      
    </div>
  </div>

          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["content.code.copy", "content.tooltips", "navigation.tabs", "navigation.top", "navigation.expand"], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>